import './polyfills.server.mjs';
import{a as pe,b as ce}from"./chunk-IAIOZ2YK.mjs";import{a as ee,b as ie}from"./chunk-XTBPHO77.mjs";import{a as h}from"./chunk-HKPSX4YY.mjs";import"./chunk-5ODGC3JF.mjs";import{a as C,b as ae}from"./chunk-GMAPYF3P.mjs";import{c as re,d as de}from"./chunk-7JUSC5HX.mjs";import"./chunk-JASC4TJK.mjs";import{a as se,b as le}from"./chunk-ECPY3672.mjs";import{f as X,l as Z,n as te}from"./chunk-LNBKQAPO.mjs";import{m as H,n as J}from"./chunk-WXT6BTQ4.mjs";import{b,c as ne,d as oe}from"./chunk-RV7QLDPK.mjs";import"./chunk-FK5NVTLL.mjs";import{a as Y}from"./chunk-7I7UKFLT.mjs";import"./chunk-TZTUFBVP.mjs";import{e as W}from"./chunk-ORYGPZMT.mjs";import"./chunk-Y3ZZBKIK.mjs";import"./chunk-7MGJQSK6.mjs";import"./chunk-AUOO4LHJ.mjs";import{c as K,q as $,w as q}from"./chunk-JQFYH3H6.mjs";import{Cc as O,Db as E,Ec as Q,Gb as w,Hc as U,Jc as _,Mc as N,Oa as a,Pa as d,Qb as F,Rb as P,U as x,Ub as D,Vb as z,Xb as G,Y as L,Z as V,_ as M,_a as p,eb as g,fb as u,gb as B,hb as R,ib as j,j as S,jb as s,kb as l,lb as c,ma as I,n as A,pb as T,rb as v,sb as f,w as k,yb as y}from"./chunk-C2J4IULD.mjs";import"./chunk-KRLCULJA.mjs";function ye(t,r){if(t&1){let o=T();s(0,"map-marker",5),v("mapClick",function(i){V(o);let n=f(2);return M(n.handleMapClick(i))}),l()}if(t&2){let o=r.$implicit,e=f(2);p("position",o.geo_direction)("options",e.markerOptions)}}function xe(t,r){if(t&1&&(s(0,"google-map",2,4),R(2,ye,1,2,"map-marker",6,B),l()),t&2){let o=f();p("options",o.options),a(2),j(o.listingArray)}}var me=(()=>{let r=class r{constructor(e,i){this._httpClient=e,this.ListingService=i,this.sim=[],this.options={mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1},this.fisrtChange=!0,this.markerOptions={draggable:!1},this.apiLoaded=e.jsonp("https://maps.googleapis.com/maps/api/js?key=AIzaSyAAb4SFQe0Kigpu3EiKhR93nC-OUitTKwM","callback").pipe(A(()=>!0),k(()=>S(!1)))}ngAfterViewInit(){setTimeout(()=>{this.fitMapBounds()},1e3)}handleMapClick(e){let i=e.coords||e.latLng;if(i){let n=`https://www.google.com/maps/search/?api=1&query=${i.lat()},${i.lng()}`;window.open(n,"_blank")}}fitMapBounds(){let e=new google.maps.LatLngBounds;for(let i of this.listingArray)e.extend(new google.maps.LatLng(i.geo_direction.lat,i.geo_direction.lng));this.map.fitBounds(e)}ngOnChanges(e){e.listingArray&&e.listingArray.currentValue&&(this.fisrtChange||this.fitMapBounds(),this.fisrtChange=!1)}};r.\u0275fac=function(i){return new(i||r)(d(K),d(h))},r.\u0275cmp=x({type:r,selectors:[["app-map-view"]],viewQuery:function(i,n){if(i&1&&z(b,5),i&2){let m;D(m=G())&&(n.map=m.first)}},inputs:{listingArray:"listingArray",filterarray:"filterarray",distances:"distances"},standalone:!0,features:[L,w],decls:6,vars:6,consts:[[1,"container","py-3"],[1,"container-map","justify-content-center","align-items-center","d-flex"],[3,"options"],[3,"listingArray","filterarray","distances"],["map",""],[3,"position","options","mapClick"],[3,"position","options"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1),g(2,xe,4,1,"google-map",2),F(3,"async"),l()(),s(4,"section"),c(5,"app-gallery-view",3),l()),i&2&&(a(2),u(2,P(3,4,n.apiLoaded)?2:-1),a(3),p("listingArray",n.listingArray)("filterarray",n.filterarray)("distances",n.distances))},dependencies:[_,U,oe,b,ne,C],styles:[`.map-container{width:85vw!important}
`],encapsulation:2});let t=r;return t})();function we(t,r){t&1&&c(0,"p-progressSpinner",21)}function _e(t,r){if(t&1&&(s(0,"div",18),g(1,we,1,0,"p-progressSpinner",19),c(2,"app-list-view",20),l()),t&2){let o=f();a(1),p("ngIf",o.loading),a(1),p("listingArray",o.listingArray)("filterarray",o.filterarray)("distances",o.distances)}}function Ce(t,r){t&1&&c(0,"p-progressSpinner",21)}function be(t,r){if(t&1&&(s(0,"div",18),g(1,Ce,1,0,"p-progressSpinner",19),c(2,"app-gallery-view",20),l()),t&2){let o=f();a(1),p("ngIf",o.loading),a(1),p("listingArray",o.listingArray)("filterarray",o.filterarray)("distances",o.distances)}}function Se(t,r){t&1&&c(0,"p-progressSpinner",21)}function Ae(t,r){if(t&1&&(s(0,"div",18),g(1,Se,1,0,"p-progressSpinner",19),c(2,"app-map-view",22),l()),t&2){let o=f();a(1),p("ngIf",o.loading),a(1),p("listingArray",o.listingArray)("filterarray",o.filterarray)}}var oi=(()=>{let r=class r{constructor(e,i,n,m,fe,ge){this.listingservice=e,this._router=i,this.filterservice=n,this.distanceService=m,this.previousRouteService=fe,this.platformId=ge,this.listingArray=[],this.filterarray=[],this.first=0,this.rows=20,this.searchQuery="",this.categories=[],this.states=[],this.state="",this.category="",this.city="",this.cities=[],this.empty=[],this.loading=!1,this.distances=[],this.stateArray=[],this.galleyView=!1,this.listView=!0,this.mapView=!1}ngOnInit(){if(this.previousRouteService.getPreviousUrl()=="/city"||this.previousRouteService.getPreviousUrl()=="/posting"||this.previousRouteService.getPreviousUrl()=="/buysell"||this.previousRouteService.getPreviousUrl()=="/listing")if(N(this.platformId)){let e=localStorage.getItem("filter"),i=[];e?(i=JSON.parse(e),this.getFilteredListing(i[0].category,i[0].state,i[0].city),this.filteredfromService(),this.clearListing()):(this.getListing(),this.filteredfromService(),this.clearListing())}else this.getListing();else this.getListing(),this.filteredfromService(),this.clearListing()}getListing(){this.listingservice.GetListing().subscribe({next:e=>{this.listingArray=e.data},error:e=>{}})}getFilteredListing(e,i,n){this.filterservice.getbussineses(e,i,n).subscribe({next:m=>{this.listingArray=m.data.businessesIds},error:m=>{}})}clearListing(){this.filterservice.clearListings.subscribe({next:e=>{this.listingArray=e.data},error:e=>{}})}filteredfromService(){this.filterservice.filteredListings.subscribe({next:e=>{this.listingArray=e.data.businessesIds}})}showGallery(){this.galleyView=!0,this.listView=!1,this.mapView=!1}showList(){this.listView=!0,this.galleyView=!1,this.mapView=!1}showMap(){this.mapView=!0,this.galleyView=!1,this.listView=!1}onPageChange(e){this.first=e.first}};r.\u0275fac=function(i){return new(i||r)(d(h),d($),d(Y),d(te),d(de),d(I))},r.\u0275cmp=x({type:r,selectors:[["app-listing"]],standalone:!0,features:[E([h,W]),w],decls:30,vars:5,consts:[[1,"searchBar","py-5"],[1,"container"],[1,"div-searchBar2","py-2","w-100","justify-content-center","align-items-center","d-flex"],[1,"form-group"],[1,"div-searchBar","justify-content-center","align-items-center","d-flex",2,"gap","0rem"],[1,"listing","py-5","mx-1"],[1,"spas"],[1,"title"],[1,"py-1"],[1,"view","d-flex","justify-content-between"],[1,"suggest"],[1,"m-0"],[1,"views","d-flex","gap-3"],[1,"box","d-flex","gap-2",3,"ngClass","click"],[1,"pi","pi-list",2,"font-size","1.5rem"],[1,"m-0","d-none","d-lg-block"],[1,"pi","pi-image",2,"font-size","1.5rem"],["class","view-data"],[1,"view-data"],["class","justify-content-center align-items-center d-flex","styleClass","w-2rem h-2rem","strokeWidth","3","fill","var(--surface-ground)","animationDuration",".5s",4,"ngIf"],[3,"listingArray","filterarray","distances"],["styleClass","w-2rem h-2rem","strokeWidth","3","fill","var(--surface-ground)","animationDuration",".5s",1,"justify-content-center","align-items-center","d-flex"],[3,"listingArray","filterarray"]],template:function(i,n){i&1&&(s(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),c(5,"app-filter")(6,"p-toast")(7,"p-confirmDialog"),l()()()()(),s(8,"section",5)(9,"div",6)(10,"div",1)(11,"div",7)(12,"h3",8),y(13," Top businesses in your Area"),l()(),s(14,"div",9)(15,"div",10)(16,"h6",11),y(17,"Suggested Results:"),l()(),s(18,"div",12)(19,"div",13),v("click",function(){return n.showList()}),c(20,"i",14),s(21,"p",15),y(22,"List View"),l()(),s(23,"div",13),v("click",function(){return n.showGallery()}),c(24,"i",16),s(25,"p",15),y(26,"Gallery View"),l()()()()()(),g(27,_e,3,4,"div",17)(28,be,3,4,"div",17)(29,Ae,3,3,"div",17),l()),i&2&&(a(19),p("ngClass",n.listView?"active":null),a(4),p("ngClass",n.galleyView?"active":null),a(4),u(27,n.listView?27:-1),a(1),u(28,n.galleyView?28:-1),a(1),u(29,n.mapView?29:-1))},dependencies:[X,Z,re,ce,pe,q,H,ie,ee,_,O,Q,C,me,ae,le,se,J],styles:[`@media (max-width: 767px){.searchBar{display:none}.listing{padding-top:9rem!important}.Area .container .row .col-md-6 .form-group .Search-btn{display:none}.Area .container .row .col-md-6 .d-flex .h1{font-size:18px;padding:0;margin:0}.Area .container .row .col-md-6 .d-flex .nav .nav-link .par{gap:19px!important}.Area .container .row .col-md-6 .d-flex .nav .nav-link .par p{display:none!important}.Area .container .row .col-md-6 .d-flex .nav .nav-link .par i{color:#ff8682}.Area .container .col-md-6 .div-searchBar .form-group i{color:#fff!important;background-color:#0f3d3e;width:32px;height:29px;justify-content:center;align-items:center;display:flex;left:260px;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;-o-border-radius:4px}.Area .container .col-md-6 .div-searchBar .form-group input{padding:0 12px!important}.Area .container .Restaurants p{line-height:38.4px;font-size:32px;font-family:Lato,sans-serif;color:#000;font-weight:900!important}.Area .container .Restaurants .div-box-navs{justify-content:center!important;align-items:center!important;display:flex!important}.Area .container .Restaurants .nav-underline{background-color:#fff;height:80px;justify-content:center;align-items:center;display:flex;box-shadow:2px 2px 2px 1px #0003;border-radius:12px;-webkit-border-radius:12px;-moz-border-radius:12px;-ms-border-radius:12px;-o-border-radius:12px}.Area .container .Restaurants .nav-underline .nav-link.active{color:#8dd3bb}.Area .container .Restaurants ul li:not(:first-child){border-left:.6px solid #d7e2ee;margin-left:40px}.Area .container .Restaurants ul li:not(:first-child) .nav-link a:visited{color:#000}.Area .container .Restaurants ul li:not(:first-child) .nav-link a.active{color:#000}.Area .container .Restaurants ul li:not(:first-child) button{color:#000;margin:0 14px}.Area .container .Restaurants ul li:not(:first-child) button .nav-link{color:#000!important}}.sfarray{width:300px;height:222px}.map-container{width:85vw}.searchBar .container .div-searchBar2 .form-group .div-searchBar form{justify-content:center;align-items:center;display:flex;gap:10px}.searchBar .container .div-searchBar2 .form-group .div-searchBar form .clear-btn{background-color:#ffbf9d;color:#fff;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;-o-border-radius:4px;width:111px;height:48px;outline:none;border:none}.searchBar .container .div-searchBar2 .form-group .div-searchBar form .Search-btn{height:48px!important;background-color:#000;color:#fff;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;-o-border-radius:4px;width:111px;outline:none;border:none}ul{padding:0}i,.d-lg-block{cursor:pointer}
`],encapsulation:2});let t=r;return t})();export{oi as ListingComponent};
