import './polyfills.server.mjs';
import{a as g}from"./chunk-JGXMTGLG.mjs";import{a as r}from"./chunk-7MGJQSK6.mjs";import{b as a,c as h}from"./chunk-GDO54X5U.mjs";import{M as u,R as b,f as l,g as c}from"./chunk-UBKK726F.mjs";var A=(()=>{let n=class n{constructor(i,e){this.httpClient=i,this.postingService=e,this.filteredListings=new l,this.filteredPostings=new l,this.filteredBuySell=new l,this.clearListings=new l,this.clearPostings=new l,this.clearBuysell=new l,this.sidebarVisibility=new c(!1),this.sidebarVisible$=this.sidebarVisibility.asObservable()}getStates(i){let e=new a;return e=e.set("category",i),this.httpClient.get(`${r.BACKEND_DOMAIN}/filter/states`,{params:e})}getCities(i,e){let s=new a;return s=s.set("category",i),s=s.set("state",e),this.httpClient.get(`${r.BACKEND_DOMAIN}/filter/cities`,{params:s})}getbussineses(i,e,s){let t=new a;return t=t.set("category",i),t=t.set("state",e),t=t.set("city",s),this.httpClient.get(`${r.BACKEND_DOMAIN}/filter/businesses`,{params:t})}filterInService(i,e,s){this.businessSubscription&&this.businessSubscription.unsubscribe(),this.businessSubscription=this.getbussineses(i,e,s).subscribe({next:t=>{console.log(t),this.filteredListings.next(t)}})}filterInPostings(i,e,s){this.postsSubscription=this.getPostings(i,e,s).subscribe({next:t=>{console.log(t),this.filteredPostings.next(t)}})}filterInBuySell(i,e,s){this.buySellSubscription=this.getBuySells(i,e,s).subscribe({next:t=>{console.log(t),this.filteredBuySell.next(t)}})}getListing(){return this.httpClient.get(`${r.BACKEND_DOMAIN}/get-businesses-website-request/${r.SITE_DOMAIN}`)}getPosting(){return this.httpClient.get(`${r.BACKEND_DOMAIN}/get-all-posts-website-request/${r.SITE_DOMAIN}`)}getbuysell(){return this.httpClient.get(`${r.BACKEND_DOMAIN}/get-all-buysells-website-request/${r.SITE_DOMAIN}`)}clearListing(){this.clearListingSubscription&&this.clearListingSubscription.unsubscribe(),this.clearListingSubscription=this.getListing().subscribe({next:i=>{this.clearListings.next(i)}}),this.clearPostingSubscription&&this.clearPostingSubscription.unsubscribe(),this.clearPostingSubscription=this.getPosting().subscribe({next:i=>{console.log("in service posts",i),this.clearPostings.next(i.data)}}),this.clearBuySellSubscription&&this.clearBuySellSubscription.unsubscribe(),this.clearBuySellSubscription=this.getbuysell().subscribe({next:i=>{console.log(i.data),this.clearBuysell.next(i.data)}})}getPostings(i,e,s){let t=new a;return t=t.set("category",i),t=t.set("state",e),t=t.set("city",s),this.httpClient.get(`${r.BACKEND_DOMAIN}/website-filtered-posts`,{params:t})}getBuySells(i,e,s){let t=new a;return t=t.set("category",i),t=t.set("state",e),t=t.set("city",s),this.httpClient.get(`${r.BACKEND_DOMAIN}/website-filtered-buysells`,{params:t})}addLike(i){let e={};return this.httpClient.post(`${r.BACKEND_DOMAIN}/business/${i}/like`,e)}addDislikes(i){let e={};return this.httpClient.post(`${r.BACKEND_DOMAIN}/business/${i}/dislike`,e)}hideSidebar(){this.sidebarVisibility.next(!1)}showSidebar(){this.sidebarVisibility.next(!0)}toggleSidebar(){this.sidebarVisibility.next(!this.sidebarVisibility.value)}};n.\u0275fac=function(e){return new(e||n)(b(h),b(g))},n.\u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();export{A as a};
